# 仕様書

1,
上流ページから遷移 = リンクを変えることでVersion Select
`src\routes\Fabric\[mc_ver]\+page.svelte`
`[mc_ver]` -> `MC1194`,`MC1201`,`MC1211`など
このようにダイナミックルーティングされたディレクトリ

2,
`src\lib\All_Fabric.yaml`
`src\lib\change_mods_list.yaml`
を読み込む

3,
`All_Fabric.yaml`から、1でSelectされたVersionを基に要らない項目を変更していく
例えば`MC1194`が選択された場合、`change_mods_list.yaml`を参考にし変更していく
このyamlの中には、各バージョンで変更すべきModとその項目が載っている

4,
変更手順

`change_mods_list.yaml`内の`minus`は、`All_Fabric.yaml`内の`name`に対応している
`minus`に書かれているMod名に対応した`name`が含まれている項目を無視する(表示しない)

`change_mods_list.yaml`内の(`replace` -> `key`)は、`All_Fabric.yaml`内の`name`に対応している
(`replace` -> `key`)に書かれているMod名に対応した`name`が含まれている項目を探す
(`replace` -> `changes`)に含まれている項目(`desc`や、`incomp`など)に応じて`All_Fabric.yaml`の同じ項目を`change_mods_list.yaml`に書かれている通りに変更する

4.1,
各yamlの中身の例

`All_Fabric.yaml`

```yaml
  - name: "Temp Mod"
    site: "https://modrinth.com/mod/[temp mod]/versions"
    stability: "○"
    desc: "説明文"
    incomp:
      - "Temp Mod 1"
      - "Temp Mod 2"
    client: 1
    server: 3

  - name: "Temp Mod3"
    site: "https://modrinth.com/mod/[temp mod]/versions"
    stability: "○"
    desc: "説明文"
    incomp:
      - "Temp Mod 1"
      - "Temp Mod 2"
    client: 1
    server: 3

  - name: "Temp Mod4"
    site: "https://modrinth.com/mod/[temp mod]/versions"
    stability: "○"
    desc: "説明文"
    incomp:
      - "Temp Mod 1"
      - "Temp Mod 2"
    client: 1
    server: 3
```

`change_mods_list.yaml`

```yaml
  MC1211:
    minus:
      - "Temp Mod"
      - "Temp Mod2"
      - "Temp Mod3"
    replace:
      - key: "Temp Mod4"
        changes:
          desc: "説明文"
      - key: "Temp Mod5"
        changes:
          desc: "説明文"
```

5,
変更したデータをsvelteを用いたtableで使えるように変形する

name -> そのままtdに挟む

site -> htmlで使えるように加工する
if [modrinth.com]が含まれている場合
    Modrinthと表記し、iconもModrinth(https://modrinth.com/favicon.ico)の物にする
if [www.curseforge.com]が含まれている場合
    CurseForgeと表記し、iconもCurseForge(https://static-beta.curseforge.com/images/favicon.ico)の物にする
if [github.com]が含まれている場合
    Githubと表記し、iconもGithub(\src\static\github-mark-white.png)の物にする

stability -> そのままtdに挟む

desc -> そのままtdに挟む

incomp -> 加工する
if 要素が含まれていない場合(`incomp: []`の場合)
    何も配置せず、`<td></td>`とする
if 要素が含まれている場合
    if 要素が一つの場合
        それをtdに挟む
    if 要素が二つ以上の場合
        要素の間に` - <br>`を配置し、tdに挟む

clientとserver -> 加工する
if 1の場合
    必要
if> 2の場合
    <h class="option">選択</h>
if 3の場合
    何も配置せず、"<td></td>"とする

5.1,
変形後のtableの例
svelteで書く

```svelte
<tr>
<th>Mod名</th>
<th>配布場所</th>
<th>安定性</th>
<th>説明 + <h class="tips">Tips</h></th>
<th>競合Mod</th>
<th>クライアント</th>
<th>サーバー･シングル</th>
</tr>
<tr>
<td><a href={siteInfo.url} target="_blank">{siteInfo.text}</a><img src={siteInfo.icon} width="16" height="16" alt="{siteInfo.text} icon"></td>
<td>{mod.stability}</td>
<td>{mod.desc}</td>
<td>{mod.incomp}</td>
<td>{mod.client}</td>
<td>{mod.server}</td>
</tr>
```

```svelte
<tr>
<th>Mod名</th>
<th>配布場所</th>
<th>安定性</th>
<th>説明 + <h class=\"tips\">Tips</h></th>
<th>競合Mod</th>
<th>クライアント</th>
<th>サーバー･シングル</th>
</tr>
<tr>
<td>[Temp Mod]</td>
<td><a href="https://modrinth.com/mod/[temp mod]/versions" target="_blank">Modrinth</a><img src="https://modrinth.com/favicon.ico" width="16" height="16" alt="modrinth icon"></td>
<td>○</td>
<td>説明文</td>
<td>[Temp mod1] - <br>[Temp mod2]</td>
<td>必須</td>
<td></td>
</tr>
```













SvelteKitを用いて静的サイト(Github Pagesで運用)のMod Listを作成しています。

`Minecraft-Optimization-Mods\src\lib\All_Fabric.yaml`
に格納されているModリストをSvelte(html)で制作されたtableに挿入し、以下のページで表示したいです。
`Minecraft-Optimization-Mods\src\routes\Fabric\[mc_ver]\+page.svelte`
[mc_ver]とあるように、複数バージョン対応のために複数ページを必要とします。


以下が仕様書です

typescriptを用いてください。
js-yamlを用いてもよいです。

## 仕様書

1,
上流ページから遷移 = リンクを変えることでVersion Select
`src\routes\Fabric\[mc_ver]\+page.svelte`
`[mc_ver]` -> `MC1194`,`MC1201`,`MC1211`など
このようにダイナミックルーティングされたディレクトリ

2,
`src\lib\All_Fabric.yaml`
`src\lib\change_mods_list.yaml`
を読み込む

3,
`All_Fabric.yaml`から、1でSelectされたVersionを基に要らない項目を変更していく
例えば`MC1194`が選択された場合、`change_mods_list.yaml`を参考にし変更していく
このyamlの中には、各バージョンで変更すべきModとその項目が載っている

4,
変更手順

`change_mods_list.yaml`内の`minus`は、`All_Fabric.yaml`内の`name`に対応している
`minus`に書かれているMod名に対応した`name`が含まれている項目を無視する(表示しない)

`change_mods_list.yaml`内の(`replace` -> `key`)は、`All_Fabric.yaml`内の`name`に対応している
(`replace` -> `key`)に書かれているMod名に対応した`name`が含まれている項目を探す
(`replace` -> `changes`)に含まれている項目(`desc`や、`incomp`など)に応じて`All_Fabric.yaml`の同じ項目を`change_mods_list.yaml`に書かれている通りに変更する

4.1,
各yamlの中身の例

`All_Fabric.yaml`

```yaml
  - name: "Temp Mod"
    site: "https://modrinth.com/mod/[temp mod]/versions"
    stability: "○"
    desc: "説明文"
    incomp:
      - "Temp Mod 1"
      - "Temp Mod 2"
    client: 1
    server: 3

  - name: "Temp Mod3"
    site: "https://modrinth.com/mod/[temp mod]/versions"
    stability: "○"
    desc: "説明文"
    incomp:
      - "Temp Mod 1"
      - "Temp Mod 2"
    client: 1
    server: 3

  - name: "Temp Mod4"
    site: "https://modrinth.com/mod/[temp mod]/versions"
    stability: "○"
    desc: "説明文"
    incomp:
      - "Temp Mod 1"
      - "Temp Mod 2"
    client: 1
    server: 3
```

`change_mods_list.yaml`

```yaml
  MC1211:
    minus:
      - "Temp Mod"
      - "Temp Mod2"
      - "Temp Mod3"
    replace:
      - key: "Temp Mod4"
        changes:
          desc: "説明文"
      - key: "Temp Mod5"
        changes:
          desc: "説明文"
```

5,
変更したデータをsvelteを用いたtableで使えるように変形する

name -> そのままtdに挟む

site -> htmlで使えるように加工する
if [modrinth.com]が含まれている場合
    Modrinthと表記し、iconもModrinth(https://modrinth.com/favicon.ico)の物にする
if [www.curseforge.com]が含まれている場合
    CurseForgeと表記し、iconもCurseForge(https://static-beta.curseforge.com/images/favicon.ico)の物にする
if [github.com]が含まれている場合
    Githubと表記し、iconもGithub(\src\static\github-mark-white.png)の物にする

stability -> そのままtdに挟む

desc -> そのままtdに挟む

incomp -> 加工する
if 要素が含まれていない場合(`incomp: []`の場合)
    何も配置せず、`<td></td>`とする
if 要素が含まれている場合
    if 要素が一つの場合
        それをtdに挟む
    if 要素が二つ以上の場合
        要素の間に` - <br>`を配置し、tdに挟む

clientとserver -> 加工する
if 1の場合
    必要
if> 2の場合
    <h class="option">選択</h>
if 3の場合
    何も配置せず、"<td></td>"とする

5.1,
変形後のtableの例
svelteで書く

```svelte
<tr>
<th>Mod名</th>
<th>配布場所</th>
<th>安定性</th>
<th>説明 + <h class="tips">Tips</h></th>
<th>競合Mod</th>
<th>クライアント</th>
<th>サーバー･シングル</th>
</tr>
<tr>
<td><a href={siteInfo.url} target="_blank">{siteInfo.text}</a><img src={siteInfo.icon} width="16" height="16" alt="{siteInfo.text} icon"></td>
<td>{mod.stability}</td>
<td>{mod.desc}</td>
<td>{mod.incomp}</td>
<td>{mod.client}</td>
<td>{mod.server}</td>
</tr>
```
